<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>nepobabiesruntheunderground</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="background">
      <!-- TODO: use sin wave with random noise to modulate the brightness on hover -->
      <div class="invert-wrapper parallax parallax-bg"></div>
      <div class="invert-wrapper parallax parallax-fg"></div>
      <div class="pillsieat-overlay"></div>
    </div>

    <section id="logo-section">
      <a href="index.html">
        <div class="difference-wrapper logo-layer" id="logo-background">
          <span class="logo-filter">
            <p class="logo-text">nepobabiesruntheunderground</p>
            <p class="logo-text-small logo-text">nepobabiesruntheunderground</p>
          </span>
        </div>
        <div class="hue-wrapper logo-layer" id="logo-foreground">
          <p class="logo-text">nepobabiesruntheunderground</p>
          <p class="logo-text-small logo-text">nepobabiesruntheunderground</p>
        </div>
      </a>
    </section>

    <section id="bassvictim-section">
      <a href="https://www.instagram.com/nepobabiesruntheunderground/">
        <div class="bassvictim-container">
          <img
            src="bassvictim.png"
            class="background_bassvictim"
            alt="Makes You Wonder"
          />
          <img
            src="bassvictim_overlay.png"
            class="overlay_bassvictim"
            alt="Makes You Wonder"
          />
          <div class="bassvictim_text">
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
          </div>
        </div>
      </a>
    </section>

    <section id="nettspend-parallax">
      <img src="nettspend.gif" alt="" class="drankgif drankdrankdrank" />
      <img src="nettspend_overlay.png" class="drankdrankdrank" />
      <a href="https://www.last.fm/user/TheTexta">
        <img src="nettspend_overlay.png" class="drankhue drankdrankdrank" />
      </a>
    </section>

    <section>
      <!-- TODO: add a swirly hover galaxy wavy effect -->
      <a href="https://ca.pinterest.com/nepobabiesruntheunderground/">
        <img
          src="nettspend_meme.jpg"
          alt=""
          class="dickpilled_background dickpilled"
        />
        <img
          src="nettspend_meme.jpg"
          alt=""
          class="dickpilled_foreground dickpilled"
        />
      </a>
    </section>

    <div class="pilleater-text">pilleater</div>

    <main>
      <div id="content">
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
      </div>
    </main>

    <script>
      const parallaxBg = document.querySelector(".parallax-bg");
      const parallaxFg = document.querySelector(".parallax-fg");
      const nettspendParallax = document.getElementById("nettspend-parallax");

      function resizeParallax() {
        const docHeight = Math.max(
          document.body.scrollHeight,
          document.documentElement.scrollHeight
        );
        const maxScrollY = docHeight - window.innerHeight;
        const neededHeight = window.innerHeight + maxScrollY * 0.5;

        parallaxBg.style.height = `${neededHeight}px`;
        if (parallaxFg) {
          parallaxFg.style.height = `${neededHeight}px`;
        }
        if (nettspendParallax) {
          nettspendParallax.style.height = `${neededHeight}px`;
        }
      }

      function updateParallax() {
        parallaxBg.style.transform = `translateY(${window.scrollY * -0.5}px)`;
        if (parallaxFg) {
          parallaxFg.style.transform = `translateY(${window.scrollY * -1}px)`;
        }
        if (nettspendParallax) {
          nettspendParallax.style.transform = `translateY(${
            window.scrollY * -0.25
          }px)`;
        }
        ticking = false;
      }

      let ticking = false;
      window.addEventListener(
        "scroll",
        () => {
          if (!ticking) {
            window.requestAnimationFrame(updateParallax);
            ticking = true;
          }
        },
        { passive: true }
      );

      window.addEventListener("load", resizeParallax);
      window.addEventListener("resize", resizeParallax);
      if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(resizeParallax);
      }

      const logoForeground = document.getElementById("logo-foreground");
      const logoBackground = document.getElementById("logo-background");
      logoForeground.addEventListener("mouseover", () => {
        logoBackground.style.filter = "invert(1)";
      });
      logoForeground.addEventListener("mouseout", () => {
        logoBackground.style.filter = "invert(0)";
      });

      // bassvictim hover effect
      const bass = document.getElementById("bassvictim-section");
      const lines = bass.querySelectorAll(".bassvictim_text p");

      let revealTimeouts = [];

      bass.addEventListener("mouseenter", () => {
        revealTimeouts = []; // reset list
        lines.forEach((p, i) => {
          const timeoutId = setTimeout(() => {
            p.classList.add("reveal");
          }, i * 30);
          revealTimeouts.push(timeoutId);
        });
      });

      bass.addEventListener("mouseleave", () => {
        // Cancel pending reveals
        revealTimeouts.forEach(clearTimeout);
        revealTimeouts = [];

        // Instantly hide everything
        lines.forEach((p) => p.classList.remove("reveal"));
      });
    </script>
  </body>
</html>

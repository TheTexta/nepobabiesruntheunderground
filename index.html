<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>nepobabiesruntheunderground</title>
    <meta
      name="description"
      content="Personal website and web development ability showcase for dexter."
    />
    <link
      rel="canonical"
      href="https://thetexta.github.io/nepobabiesruntheunderground/index.html"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="manifest" href="manifest.json" />
    <meta
      name="theme-color"
      content="#ffffff"
      media="(prefers-color-scheme: dark)"
    />
    <!-- Favicons -->
    <link
      rel="icon"
      type="image/png"
      href="assets/images/favicons/favicon-16x16.png"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/png"
      href="assets/images/favicons/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="assets/images/favicons/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="assets/images/favicons/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      href="assets/images/favicons/apple-touch-icon.png"
    />
    <link rel="shortcut icon" href="assets/images/favicons/favicon.ico" />
    <!-- Microsoft Tiles -->
    <meta
      name="msapplication-TileImage"
      content="assets/images/favicons/mstile-144x144.png"
    />
    <meta name="msapplication-TileColor" content="#000000" />
    <script defer src="assets/js/tvstatic.js"></script>
  </head>
  <body>
    <!-- TV Static overlay canvas with screen blend mode  <canvas id="tv-static-canvas"></canvas>-->

    <!-- Top layer TV static canvas with different blend mode -->
    <canvas class="tv-static-top tv-static-canvas" id="tv-static-top"></canvas>
    <canvas
      class="tv-static-cursor-tracking-layer tv-static-canvas"
      id="tv-static-tracking-cursor-pos"
    ></canvas>

    <!-- TODO: parallax scrolling effects through invisible child containers whose positions are updated -->
    <div id="background">
      <!-- TODO: use sin wave with random noise to modulate the brightness on hover -->

      <div class="invert-wrapper parallax" id="parallax-bg"></div>
      <div class="invert-wrapper parallax" id="parallax-fg"></div>
      <div class="pillsieat-overlay"></div>
    </div>

    <!-- TODO make it so that each individual letter has the hover effect such that the whole thing is bubbling upon hover-->
    <section id="logo-section">
      <a href="index.html">
        <div class="difference-wrapper logo-layer" id="logo-background">
          <h1 class="logo-text" id="background-logo-text">
            nepobabiesruntheunderground
          </h1>
          <p class="logo-text-small logo-text" id="background-logo-text-small">
            nepobabiesruntheunderground
          </p>
        </div>
        <div
          class="logo-layer"
          style="mix-blend-mode: hue"
          id="logo-foreground"
        >
          <p class="logo-text" id="foreground-logo-text">
            nepobabiesruntheunderground
          </p>
          <p class="logo-text-small logo-text" id="foreground-logo-text-small">
            nepobabiesruntheunderground
          </p>
        </div>
      </a>
    </section>

    <section id="bassvictim-section">
      <a href="https://www.instagram.com/nepobabiesruntheunderground/">
        <div class="bassvictim-container">
          <img
            src="assets/images/bassvictim.png"
            class="background_bassvictim"
            alt="Bassvictim music artist 'Makes You Wonder' single cover"
          />
          <img
            src="assets/images/bassvictim_overlay.png"
            class="overlay_bassvictim"
            alt=""
            aria-hidden="true"
          />
          <div class="bassvictim_text">
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
            <p>INSTAGRAM</p>
          </div>
        </div>
      </a>
    </section>

    <section id="nettspend-parallax">
      <img
        src="assets/images/nettspend.gif"
        alt="Animated Netspend meme"
        class="drankgif drankdrankdrank"
      />
      <img
        src="assets/images/nettspend_overlay.png"
        class="drankdrankdrank"
        alt=""
        aria-hidden="true"
      />
      <a
        href="https://www.last.fm/user/TheTexta"
        aria-label="TheTexta on Last.fm"
      >
        <img
          src="assets/images/nettspend_overlay.png"
          class="drankhue drankdrankdrank"
          alt=""
          aria-hidden="true"
        />
      </a>
    </section>

    <section>
      <a href="./me.html" aria-label="About me">
        <img
          src="assets/images/me_background.gif"
          alt=""
          class="me_background me"
          loading="lazy"
          aria-hidden="true"
        />
        <img
          src="assets/images/me_foreground.gif"
          alt=""
          class="me_foreground me"
          loading="lazy"
          aria-hidden="true"
        />
        <img
          src="assets/images/me_background.gif"
          alt=""
          class="me_ultraforeground me"
          loading="lazy"
          aria-hidden="true"
        />
        <img
          src="assets/images/me_hover.gif"
          alt=""
          class="me_hover me"
          loading="lazy"
          aria-hidden="true"
        />
      </a>
    </section>

    <section>
      <a
        href="https://open.spotify.com/user/djaydex?si=b02c31c1b8a248ca"
        aria-label="nepobabiesruntheunderground on Spotify"
      >
        <img
          src="assets/images/pilleater.png"
          alt=""
          class="pilleater-image"
          id="pilleater-background"
          aria-hidden="true"
        />
        <img
          src="assets/images/pilleater.png"
          alt=""
          class="pilleater-image-foreground pilleater-image"
          id="pilleater-foreground"
          aria-hidden="true"
        />
      </a>
    </section>

    <section>
      <video autoplay loop muted playsinline>
        <source src="assets/videos/im_a_slut_again.webm" type="video/webm" />
      </video>
    </section>

    <main>
      <!-- TODO have a poem where specific words link to favourite songs/videos-->
      <div id="content">
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
      </div>
    </main>

    <script>
      // Manual TV static initialization with explicit options
      // Disable auto-init in tvstatic.js so we control setup here
      window.TVSTATIC_AUTO_INIT = false;

      var topCanvas = document.getElementById("tv-static-top");
      var cursorCanvas = document.getElementById(
        "tv-static-tracking-cursor-pos"
      );

      window.mobileCheck = function () {
        let check = false;
        (function (a) {
          if (
            /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
              a
            ) ||
            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
              a.substr(0, 4)
            )
          )
            check = true;
        })(navigator.userAgent || navigator.vendor || window.opera);
        return check;
      };

      if (window.mobileCheck()) {
        console.log("Mobile device detected: TV static effects disabled");
        topCanvas.style.display = "none";
        cursorCanvas.style.display = "none";
      } else {
        // Use window load to ensure deferred scripts are executed and shaders are fetchable
        window.addEventListener(
          "load",
          function () {
            try {
              if (typeof window.createTVStaticOverlay !== "function") {
                // tvstatic.js not ready; bail safely
                return;
              }
              // Top overlay with its CSS class for styling
              if (topCanvas) {
                window.createTVStaticOverlay("tv-static-top", {
                  pixelScale: 4,
                  scaleIntensity: 100,
                  staticSpeed: 15,
                  rippleFalloff: 5.0,
                  opacity: 1,
                });
              }
              // Cursor-tracking static layer with tighter pixels and faster response
              if (cursorCanvas) {
                window.createTVStaticOverlay("tv-static-tracking-cursor-pos", {
                  pixelScale: 5,
                  scaleIntensity: 70,
                  staticSpeed: 17,
                  rippleFalloff: 2.5,
                  opacity: 1,
                  mouseFollower: true, // brighten pixels around cursor; default is off globally
                });
              }
            } catch (e) {
              console.error("TV static manual init failed:", e);
            }
          },
          { once: true }
        );
      }

      window.addEventListener("DOMContentLoaded", () => {
        const logoForeground = document.getElementById("logo-foreground");
        if (logoForeground) {
          logoForeground.addEventListener("mouseover", () => {
            document.getElementById("background-logo-text").style.color =
              "#000"; // black

            document.getElementById("background-logo-text-small").style.color =
              "#fff"; // white
          });
          logoForeground.addEventListener("mouseout", () => {
            document.getElementById("background-logo-text").style.color =
              "#fff";
            document.getElementById("background-logo-text-small").style.color =
              "#000";
          });
        }

        // BASSVICTIM TEXT REVEAL EFFECT
        const bass = document.querySelector(".bassvictim-container");
        if (bass) {
          const lines = bass.querySelectorAll(".bassvictim_text p");
          let revealTimeouts = [];
          bass.addEventListener("mouseenter", () => {
            revealTimeouts = [];
            lines.forEach((p, i) => {
              const timeoutId = setTimeout(() => {
                p.classList.add("reveal");
              }, i * 30);
              revealTimeouts.push(timeoutId);
            });
          });
          bass.addEventListener("mouseleave", () => {
            revealTimeouts.forEach(clearTimeout);
            revealTimeouts = [];
            lines.forEach((p) => p.classList.remove("reveal"));
          });
        }

        // TODO move all this to css. it can be done with css animations and keyframes very easily
        const pilleaterForeground = document.getElementById(
          "pilleater-foreground"
        );
        const pilleaterBackground = document.getElementById(
          "pilleater-background"
        );
        if (pilleaterForeground && pilleaterBackground) {
          let flashed = false;
          setInterval(() => {
            pilleaterBackground.style.filter = flashed
              ? "invert(0)"
              : "invert(1)";
            flashed = !flashed;
          }, 140);
        }
      });

      // PARALLAX SCROLLING EFFECTS
      window.addEventListener("scroll", () => {
        const y = window.scrollY;
        document.getElementById("parallax-bg").style.backgroundPositionY = `${
          y * -0.1
        }px`;
        document.getElementById("parallax-fg").style.backgroundPositionY = `${
          y * -0.3
        }px`;
      });

      // cursor fade on mouse leaving window effect
      window.addEventListener("mouseout", () => {
        const cursorLayer = document.getElementById(
          "tv-static-tracking-cursor-pos"
        );
        if (cursorLayer) {
          cursorLayer.style.opacity = 0;
        }
      });
      window.addEventListener("mouseover", () => {
        const cursorLayer = document.getElementById(
          "tv-static-tracking-cursor-pos"
        );
        if (cursorLayer) {
          cursorLayer.style.opacity = 1;
        }
      });
    </script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("sw.js");
        });
      }
    </script>
  </body>
</html>

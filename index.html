<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>nepobabiesruntheunderground</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- 1) Your fixed parallax layer -->
    <div class="parallax-bg"></div>

    <!-- 2) The pixel-canvas sits immediately above it -->
    <canvas id="pixel-canvas"></canvas>

    <!-- 3) The overlay and rest of your content remain as before -->
    <div class="pillsieat-overlay"></div>
    <img src="nepobabiesruntheundergroundlogo.png" class="logo" alt="Logo" />

    <a href="https://www.last.fm/user/TheTexta" target="_blank" rel="noopener">
      <img src="makesyouwonder.png" class="makesyouwonder" alt="Makes You Wonder" />
    </a>

    <img src="dickpilled.jpg" alt="" class="dickpilled">
    <main>
      <div id="content">
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
        <p>i dont need anything</p>
      </div>
    </main>

    <script>
      // parallax background script
      const parallaxBg = document.querySelector(".parallax-bg");

      function resizeParallax() {
        // pick the larger of body vs html scroll heights:
        const docHeight = Math.max(
          document.body.scrollHeight,
          document.documentElement.scrollHeight
        );
        const maxScrollY = docHeight - window.innerHeight;
        const neededHeight = window.innerHeight + maxScrollY * 0.5;

        parallaxBg.style.height = `${neededHeight}px`;
      }

      function updateParallax() {
        parallaxBg.style.transform = `translateY(${window.scrollY * -0.5}px)`;
        ticking = false;
      }

      let ticking = false;
      window.addEventListener(
        "scroll",
        () => {
          if (!ticking) {
            window.requestAnimationFrame(updateParallax);
            ticking = true;
          }
        },
        { passive: true }
      );

      // Recompute height at the right times:
      window.addEventListener("load", resizeParallax);
      window.addEventListener("resize", resizeParallax);
      if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(resizeParallax);
      }

      // logo mix-blend-mode script
      const logo = document.querySelector(".logo");
      const blendModes = [
        "normal",
        "multiply",
        "screen",
        "overlay",
        "darken",
        "lighten",
        "color-dodge",
        "color-burn",
        "hard-light",
        "soft-light",
        "difference",
        "exclusion",
        "hue",
        "saturation",
        "color",
        "luminosity",
      ];

      let blendTimeout;

      logo.addEventListener("mousemove", () => {
        const randomMode =
          blendModes[Math.floor(Math.random() * blendModes.length)];
        logo.style.mixBlendMode = randomMode;

        clearTimeout(blendTimeout);
        blendTimeout = setTimeout(() => {
          logo.style.mixBlendMode = "luminosity";
        }, 200);
      });

      // Set initial blend mode
      logo.style.mixBlendMode = "luminosity";
    </script>
  </body>
</html>
